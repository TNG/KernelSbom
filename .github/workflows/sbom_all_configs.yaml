# SPDX-License-Identifier: GPL-2.0-only
# SPDX-FileCopyrightText: 2025 TNG Technology Consulting GmbH

name: Sbom all Configs

on:
  workflow_dispatch:

run-name: Sbom all Configs

jobs:
  sbom-all-configs:
    uses: ./.github/workflows/sbom.yaml
    with:
      test_archive: ${{ matrix.test_archive }}
      output_tree: ${{ matrix.output_tree || 'kernel_build' }}
      root_outputs_in_tree: ${{ matrix.root_outputs_in_tree || 'arch/x86/boot/bzImage modules.order' }}

    strategy:
      fail-fast: false 
      matrix:
        include:
          # v6.1
          - test_archive: linux.v6.1.y.localmodconfig.Ubuntu25.04.tar.gz
          - test_archive: linux.v6.1.y.gregkh-linux-stable.tar.gz
          - test_archive: linux.v6.1.y.gregkh-linux-stable.in-tree.tar.gz
            output_tree: .
          # v6.6
          - test_archive: linux.v6.6.y.gregkh-linux-stable.tar.gz
          # v6.12
          - test_archive: linux.v6.12.y.gregkh-linux-stable.tar.gz
          # v6.17
          - test_archive: linux.v6.17.tinyconfig.tar.gz
            root_outputs_in_tree: arch/x86/boot/bzImage
          - test_archive: linux.v6.17.defconfig.tar.gz
          - test_archive: linux.v6.17.defconfig.rust.tar.gz
          - test_archive: linux.v6.17.allmodconfig.tar.gz
          - test_archive: linux.v6.17.localmodconfig.Ubuntu24.04.tar.gz
          - test_archive: linux.v6.17.y.gregkh-linux-stable.tar.gz
